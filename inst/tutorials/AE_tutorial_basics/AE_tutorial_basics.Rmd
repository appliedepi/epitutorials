---
title: "Applied Epi - R basics"
tutorial:
  id: "AE_tutorial_basics"
output: 
  learnr::tutorial:
    progressive: true
    allow_skip: true
runtime: shiny_prerendered
description: >
  Learn how to get started with R, and how to import a dataset
---

<!-- NOTES: To edit images, edit them in the "images" folder that lives NEXT TO THE RMD FILE -->


<!-- Add JavaScript code for making the exercise code larger -->
<script language="JavaScript" src="js/exercise-font-size.js"></script>

```{r setup, include=FALSE}
library(learnr)          # create lessons from rmd
library(gradethis)       # evaluate exercises
library(dplyr)           # wrangle data
library(flair)           # highlight code
library(ggplot2)         # visualise data
library(gtsummary)         # visualise data
library(lubridate)       # work with dates
library(fontawesome)     # for emojis
library(janitor)         # clean data
library(DT)         # present tables

# library(RMariaDB)        # connect to sql database

## set options for exercises and checking ---------------------------------------

## Define how exercises are evaluated 
gradethis::gradethis_setup(
  ## note: the below arguments are passed to learnr::tutorial_options
  ## set the maximum execution time limit in seconds
  exercise.timelimit = 60, 
  ## set how exercises should be checked (defaults to NULL - individually defined)
  # exercise.checker = gradethis::grade_learnr
  ## set whether to pre-evaluate exercises (so users see answers)
  exercise.eval = FALSE 
)

# ## event recorder ---------------------------------------------------------------
# ## see for details:
# ## https://pkgs.rstudio.com/learnr/articles/publishing.html#events
# ## https://github.com/dtkaplan/submitr/blob/master/R/make_a_recorder.R
# 
# ## connect to your sql database
# sqldtbase <- dbConnect(RMariaDB::MariaDB(),
#                        user = 'sander', 
#                        password = 'E9hqb2Tr5GumHHu',
#                        # user     = Sys.getenv("userid"),
#                        # password = Sys.getenv("pwd"),
#                        dbname   = 'excersize_log',
#                        host     = "144.126.246.140")
# 
# 
# ## define a function to collect data
# ## note that tutorial_id is defined in YAML
#     ## you could set the tutorial_version too (by specifying version:) but use package version instead
# recorder_function <- function(tutorial_id, tutorial_version, user_id, event, data) {
# 
#   ## define a sql query
#   ## first bracket defines variable names
#   ## values bracket defines what goes in each variable
#   event_log <- paste("INSERT INTO responses (
#                        tutorial_id,
#                        tutorial_version,
#                        date_time,
#                        user_id,
#                        event,
#                        section,
#                        label,
#                        question,
#                        answer,
#                        code,
#                        correct)
#                        VALUES('", tutorial_id,  "',
#                        '", tutorial_version, "',
#                        '", format(Sys.time(), "%Y-%M%-%D %H:%M:%S %Z"), "',
#                        '", Sys.getenv("SHINYPROXY_PROXY_ID"), "',
#                        '", event, "',
#                        '", data$section, "',
#                        '", data$label,  "',
#                        '", paste0('"', data$question, '"'),  "',
#                        '", paste0('"', data$answer,   '"'),  "',
#                        '", paste0('"', data$code,     '"'),  "',
#                        '", data$correct, "')",
#                        sep = '')
# 
#     # Execute the query on the sqldtbase that we connected to above
#     rsInsert <- dbSendQuery(sqldtbase, event_log)
# 
# }
# 
# options(tutorial.event_recorder = recorder_function)
```

```{r, include=FALSE}
# hide non-exercise code chunks ------------------------------------------------
knitr::opts_chunk$set(echo = FALSE)
```

```{r, include=FALSE}
# data prep --------------------------------------------------------------------
linelist <<- rio::import(system.file("dat/surveillance_linelist_20141201.csv", package = "epitutorials"))
```


## Introduction to R for Applied Epidemiology and Public Health

```{r, eval = TRUE, echo = FALSE, out.width = "100%"}
knitr::include_graphics("images/applied_epi_banner.png", error = F)
```


#### Welcome to Applied Epi's free self-paced tutorial series

This is the **first** tutorial in Applied Epi's free self-paced tutorial series. This tutorial teaches setup of R, basic R syntax, file management, and importing data within the context of public health and applied epidemiology.

This tutorial guides you through coding exercises to be performed in this tutorial window. These tutorials:  

* Teach R emphasizing examples, datasets, and challenges commonly faced by applied epidemiologists  
* Are friendly to people who have never used a programming language before  
* Do not require that you have R and RStudio installed on your computer  

In contrast, our live R courses offer coaching from our instructors with decades of frontline epidemiology experience, who can help you set up R on your computer (see our **[live course offerings](www.training.appliedepi.org)**).  


#### Applied Epi

**[Applied Epi](www.appliedepi.org) is a nonprofit organization that supports frontline public health practitioners through open-source tools, training, and support.** We are a team of 150 epidemiologists and public health practitioners with decades of ground-level experience in local public health and outbreak response.  

Our free [Epidemiologist R Handbook](www.epiRhandbook.com) has helped over **175,000 people** learn R and remains a vital resource for many practitioners.  
We have built a comprehensive ecosystem of tools, training, and support around this foundation:  


:::: {style="display: flex;"}

::: {}
```{r, out.width = "65%", fig.align = "center", echo=F}
knitr::include_graphics("images/tools_icon.png")
```

* **[Epi R Handbook](www.epiRhandbook.com)**
* **[R packages](https://appliedepi.org/tools/)**
* **[Situation report templates](https://appliedepi.org/tools/)**
:::





::: {.col data-latex="{0.05\textwidth}"}
\ 
<!-- an empty Div (with a white space), serving as
a column separator -->
:::





::: {}
```{r, out.width = "65%", fig.align = "center", echo=F}
knitr::include_graphics("images/teaching_icon.png")
```

* **[Live R training courses](www.training.appliedepi.org)**
* **[Self-paced R tutorials](https://training.appliedepi.org)**
* **[Case studies](www.training.appliedepi.org)**
:::




::: {.col data-latex="{0.05\textwidth}"}
\ 
<!-- an empty Div (with a white space), serving as
a column separator -->
:::

::: {}
```{r, out.width = "65%", fig.align = "center", echo=F}
knitr::include_graphics("images/QA_icon.png")
```

* **[Q&A discussion forum](www.community.appliedepi.org)**
* **[R Help Desk](https://appliedepi.org/helpdesk/)**
* **Mentorship program**  
:::



::::



<form target="_blank" action="https://www.paypal.com/donate" method="post" target="_top">
<input type="hidden" name="hosted_button_id" value="YTEZELC8VBXV6" />
<input type="image" src="https://github.com/appliedepi/epiRhandbook_eng/raw/master/images/donate_button_long.png" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" />
</form>





#### Target Audience  

This tutorial is for public health practitioners, applied epidemiologists, clinicians, and researchers seeking to learn R but who do not have access to our live R courses.  

#### Format  

Here, R coding is taught *within* the tutorials, whereas in our live courses we teach you using R on your computer, can quickly help you troubleshoot errors, answer your questions, give tips, and expand upon the topics that are briefly covered here.  


#### Offline access  

You can access these tutorials offline by following [these instructions](www.training.appliedepi.org) to download our R package {epitutorials}. You will then be able to view these exercises *within your RStudio*, offline.  


#### Acknowledgements  

Authors of this tutorial include:  

* Neale Batra  
* Brianna Bradley  

Funding for this tutorial was provided by Medicins sans frontieres (MSF) / Doctors without Borders and TEPHINET.  

**Click "Continue" or "Next Topic" to move to the next section of the tutorial, or navigate using the Table of Contents on the left.**  

















## About this tutorial


### Learning objectives

In this tutorial you will:  

1) Become familiar with the panels in the RStudio interface
2) Practice opening a new R script and running R code "commands" from an R script
3) Learn basic R syntax, operators, and functions  
4) Practice by coding a medical supply chain exercise  
5) Install and load R packages  
6) Learn about RStudio projects and best-practices for naming files  
7) Import a CSV dataset into R, and conduct some exploratory analysis   


#### Accompanying resources

This tutorial draws from chapters of our free [Epidemiologist R handbook](https://epirhandbook.com/en/) such as [R basics](https://epirhandbook.com/en/r-basics.html), [Importing and exporting](https://epirhandbook.com/en/import-and-export.html), and [R projects](https://epirhandbook.com/en/r-projects.html).  


#### Next steps  
After completing this tutorial, we recommend you complete our tutorial on "Tidy Data" - collecting, formatting, and preparing your dataset *before* importing it into R is a critical step!  




### Resources for you  



#### Review a dataset  

Because this tutorial is self-contained within this window, we will often ask you to look at the first few rows of practice datasets in the format below.  

Below, the dataset `linelist` is displayed. It contains `r nrow(linelist)` rows, but we are only showing the **first 25 rows** now.  

* Scroll to the right to see all the columns  
* Use the numbers buttons in the lower-right to page through the additional available rows (25 rows in this case)  
* Click a column name to sort the rows  
* Filter rows by clicking/typing in the empty box above the column  

```{r, echo=FALSE, eval=TRUE, message = FALSE, warning = FALSE}
DT::datatable(head(linelist, 25), rownames = FALSE, filter="top", options = list(pageLength = 5, scrollX=T), class = 'white-space: nowrap' )
```



#### Getting help  

To get help while completing this tutorial:  

1) Look for expandable green helper text (see below) 
2) Look for "hints" and "solutions" above the coding boxes (see below)  
3) Post a question in [Applied Epi Community](www.community.appliedepi.org) in the category for questions about Applied Epi Training  


#### Helper text  

Here is what the "helper text" will look like. Click on it to expand the text.

<!--
NOTE: Below is the hint (all within details tags collapsed)
-->
<details>

<summary style='text-decoration: underline; color: darkgreen;'>`r fontawesome::fa("lightbulb", fill = "gold")` Click to read more</summary>
</br>

Here there will be some helpful tips or advice!


</br>
</details>




#### Code boxes  

This tutorial does not assume that you have R or RStudio working on your computer. Therefore, you can complete coding exercises in these codeboxes within the tutorial. For example:  

**Type the following R command in the codebox and press "Submit answer"**. This command will cross-tabulate observations from the dataset `linelist` (displayed above), placing gender in the output table's rows and case definition in the output table's columns.  

```
tbl_cross(data = linelist, row = gender, col = case_def)
```

* Press "Hints" to see hints or tips  
* Press "Run code" to run the code to preview the result  
* Press "Start over" to revert the box to its original state  
* Press "Submit answer" to submit your code and compare it against the solution  


<!-- ```{r ex-demo-setup, echo=FALSE, eval=FALSE} -->
<!-- linelist <<- rio::import(system.file("dat/surveillance_linelist_20141201.csv", package = "epitutorials")) -->
<!-- ``` -->


```{r example-codebox, exercise = TRUE}
Type the code here
```

```{r example-codebox-hint, eval = FALSE, exercise = FALSE}
Type the code exactly as written, into the codebox. Then press Run
```

```{r example-codebox-hint2, eval = FALSE, exercise = FALSE}
tbl_cross(data = linelist, row = gender, col = case_def)
```

```{r example-codebox-solution, exercise = FALSE}
tbl_cross(data = linelist, row = gender, col = case_def)
```

```{r example-codebox-check, exercise = FALSE}
grade_this_code("Correct, you should see a cross-tabulation of the linelist, in which gender is in the rows and case definition is in the columns.")
```




#### Quiz questions  

Please complete the quiz questions that you encounter throughout the tutorial. **Answering will help you** to comprehend the material, and will also help us to improve the exercises for future students.  

To practice, please answer the following questions:  

```{r quiz-use-helper, echo=F}
quiz(
  question_radio("When should I view the red 'helper' code?",
    answer("After trying to write the code myself", correct = TRUE),
    answer("Before I try coding", correct = FALSE),
    correct = "Reviewing best-practice code after trying to write yourself can help you improve",
    incorrect = "Please attempt the exercise yourself, or use the hint, before viewing the answer."
  )
)
```


```{r quiz-anxious, echo = FALSE}
question_numeric(
 "How anxious are you about beginning this tutorial - on a scale from 1 (least anxious) to 10 (most anxious)?",
 answer(10, message = "Try not to worry, we will help you succeed!", correct = T),
 answer(9, message = "Try not to worry, we will help you succeed!", correct = T),
 answer(8, message = "Try not to worry, we will help you succeed!", correct = T),
 answer(7, message = "Try not to worry, we will help you succeed!", correct = T),
 answer(6, message = "Ok, we will get there together", correct = T),
 answer(5, message = "Ok, we will get there together", correct = T),
 answer(4, message = "I like your confidence!", correct = T),
 answer(3, message = "I like your confidence!", correct = T),
 answer(2, message = "I like your confidence!", correct = T),
 answer(1, message = "I like your confidence!", correct = T),
 allow_retry = TRUE,
 correct = "Thanks for sharing. ",
 min = 1,
 max = 10,
 step = 1
)
```


#### Icons  

You will see these icons throughout the exercises:

Icon  |Meaning
------|--------------------
`r fontawesome::fa("eye", fill = "darkblue")`|Observe  
`r fontawesome::fa("exclamation", fill = "red")`|Alert!  
`r fontawesome::fa("pen", fill = "brown")`|An informative note  
`r fontawesome::fa("terminal", fill = "black")`|Time for you to code!  
`r fontawesome::fa("window-restore", fill = "darkgrey")`|Change to another window  
`r fontawesome::fa("bookmark", fill = "orange")`|Remember this for later  



#### Getting help on Applied Epi Community  

Our other site [Applied Epi Community](www.community.appliedepi.org) is a public Q&A and discussion forum. You can post a question in the category "Applied Epi Training" about the content in these tutorials. A member of the community may help you by voluntarily answering your question.  

* Be sure to clearly reference which tutorial and which question you are stuck on  
* Explain what you have already tried to do  
* Thank anyone who replies for their time  






## Understand R and RStudio  


### Understand R   

**R is a language** used for statistical computing and graphics, developed in 1991 and based on the language S ([read more of the history here](https://bookdown.org/rdpeng/rprogdatascience/history-and-overview-of-r.html#what-is-r)). 

**R is different from other programming languages** in that its original purpose is data analysis.  

**R is distinct from other data analysis languages** because:  

* It is free (no more license fees!)  
* It has advanced graphics capabilities  
* It has versatile automated reporting capabilities (very useful in public health!)  
* It is open-source (new capabilities are created by the user community)  
* It has a large, growing, and vibrant user community.  

Because R is open-source, its functionalities are expanded by its user community - every day! Users like you can write R code that does a specific task (for example, a template for an outbreak situation report), share it with the world, and others can evaluate and adopt it as needed. Ultimately, this is a robust process with millions of people testing and vetting code. Only the best becomes widely adopted. R is trusted and used by many institutions: for example, the [US Food and Drug Administration (FDA)](https://blog.revolutionanalytics.com/2012/06/fda-r-ok.html).  

R is governed by a "core group" and is updated every few months. Pay attention to the **R version** that you download - each version is assigned a number (like "R version 4.1.2 (2021-11-01)") and a name to make it easier to remember, like "Bird Hippie". To update your version of R, re-download it.  


### Why use R?  



#### IT'S FREE!

R is free to use! There is a strong ethic in the community of free and open-source material.

The accessibility of R is unmatched, open for use to anyone with access to a computer, a bit of wifi (for installation), and motivation to learn.  Most analytic software comparable to R are not free. In fact, they can be quite expensive over time if one has to renew and purchase a license annually. Without cost as a barrier, you can now focus on learning how to use R. Applied Epi will help get you there.  


#### Popularity

The below graph shows the number of publications citing R, SPSS, SAS, and STATA from 2015 to 2019, as sourced from Google Scholar. As a field epidemiologist from Nigeria said to us: "R has become the gold standard in infectious epidemiology globally."  

```{r appliedepi-popularity, fig.margin = TRUE, echo = FALSE, fig.width = 3, out.width = "50%", fig.cap = ""}
knitr::include_graphics("images/r_popularity.png")
```


#### Data visualization

R is known for its brilliant data visualizations. It is capable of producing deeply customized tables, maps, and epidemic curves. With a bit more advanced knowledge you can visualize contact tracing patterns, phylogenetic trees, and publication-ready plots.  

```{r appliedepi-viz, fig.margin = TRUE, echo = FALSE, fig.width = 3, out.width = "50%", fig.cap = ""}
knitr::include_graphics("images/visualization.png")
```


#### Efficiency

A Haitian epidemiologist using our resources said: ‘With R I can do anything. What took 10 hours in Excel, I do in less than 1 hour. Also it is easier to detect if there is a mistake."  

R means more flexibility, confidence, and time for systemic change. Implementing R skills into your daily workflow will allow you to increase your work capacity and reduce response time to rapidly evolving public health scenarios.  

#### Flexibility

R can interact with many common data collection tools, websites, and software. You can even automate R to produce surveillance or situation reports and email them out to partners. 

```{r appliedepi-flexibility, fig.margin = TRUE, echo = FALSE, fig.width = 3, out.width = "50%", fig.cap = ""}
knitr::include_graphics("images/interoperability.png")
```



#### Equity

*R is not just a new tool, but a new culture*

As an open-source language, R is built by its end-users. This advances an equity agenda, advancing local capacity, local problem-solving, and decentralizing innovation.  

An R user in any part of the world can write code to produce a tool, share it, have it be verified by the community, and see it be adopted widely. This empowerment of end-users is paramount to a more equitable epidemiological community.

#### Community  

R has a vibrant user community support network, such as events facilitated by groups like [R-Ladies](https://rladies.org/), [AfricaR](https://africa-r.org/), and Q&A forums on StackOverflow, R-Bloggers, and Twitter (follow \@epitwitter, \@epiRhandbook, \@AppliedEpi, and #rstats).  


```{r appliedepi-community, fig.margin = TRUE, echo = FALSE, fig.width = 3, out.width = "50%", fig.cap = ""}
knitr::include_graphics("images/user_community.png")
```






### What is your reason for learning R?

Tell us in one or two sentences why you are trying to learn R. **Write your answer within "quotation marks" and press 'Submit answer'.**

```{r excited-r, exercise=TRUE, exercise.lines = 2}
"I want to..."

```

```{r excited-r-check}
grade_this({
  # custom checking code appears here
  if (is.character(.result)) {
    pass("Thank you for sharing your story with us!")
  }
  fail("Thanks for sharing!")
})
```

Which analytical software do you use the most? **Write your answer within "quotation marks" and press 'Submit answer'.**

```{r software-use, exercise=TRUE, exercise.lines = 2}
"e.g. SAS, Stata, Excel, R, EpiInfo, EpiData, Tableau, Python..."

```

```{r software-use-check}
grade_this({
  # custom checking code appears here
  if (is.character(.result)) {
    pass("Thank you for sharing this detail with us!")
  }
  fail("Thanks for sharing!")
})
```


What is your current level of experience with R? **Write your answer within "quotation marks" and press 'Submit answer'.**

```{r r-experience, exercise=TRUE, exercise.lines = 2}
"Write either: None, Some training, Run other people's scripts, Regular user, or Advanced."

```

```{r r-experience-check}
grade_this({
  # custom checking code appears here
  if (is.character(.result)) {
    pass("Thank you for sharing this with us!")
  }
  fail("Thanks for sharing!")
})
```

What is your primary professional relationship with public health? **Write your answer within "quotation marks" and press 'Submit answer'.**

```{r health-experience, exercise=TRUE, exercise.lines = 2}
"Write either: None, Student/trainee, Academic research, Public health practitioner, Applied epidemiologist, or Clinician."

```

```{r health-experience-check}
grade_this({
  # custom checking code appears here
  if (is.character(.result)) {
    pass("Thank you for sharing this with us!")
  }
  fail("Thanks for sharing!")
})
```









## Setup R and RStudio  

This section of the tutorial will help you better understand R and RStudio. If you are unable to install R and RStudio on your computer, you can still complete this tutorial.  

### R is the engine  

When you install R to your computer, it is an independent software that you can open directly. If you open only R (not RStudio), you will see only one simple panel - the R Console. **This is not how must people use R**. Using R this way will run all the computations and create all the plots you desire, *but it will be difficult to stay organized*.    

**Now, people use Integrated Development Environments (IDEs) such as RStudio** to "wrap around" their R software, allowing a more friendly user interface and file organization.  

You can think of R as being the *engine* of a vehicle, doing the crucial work, and RStudio as the *body* of the vehicle (with seats, accessories, etc.) that helps you actually use the engine to move forward!  


### RStudio is the vehicle body  

"RStudio" is an interface (IDE) for easier use of R. It is offered for free by the RStudio corporation.  

Again, you can think of **R as the engine of a vehicle**, doing the crucial work, and **RStudio as the body of the vehicle** (with seats, accessories, etc.) that helps you actually use the engine to move forward! Therefore, you should install R *and* RStudio to proceed.  

When you open RStudio, it will automatically find the R installation on your computer, and use it. There is no need to open both programs.  



### Quiz  

Now, please check your understanding of R and RStudio by answering the questions below:  

```{r rstudio-quiz, echo=FALSE}
quiz(caption = "Quiz - R and RStudio",
    
   question("What is RStudio?",
            allow_retry = TRUE,
    answer("An application that makes it easier to use R.",
           correct = TRUE,
           message = "RStudio is an 'Integrated Development Environment (IDE) that makes it easier to write, use, debug, and save R code."),
    answer("A spreadsheet program like Microsoft Excel."),
    answer("Another name for R",
           message = "R and RStudio are two separate things. R is a language, like English or French. RStudio can be thought of as a program that helps you use the language, like how a word processing program helps you write."),
    answer("An application that lets you use R without writing any code",
           message = "You still have to write code - and that's a good thing! Code provides a reproducible record of your work, which is best practice.")
  ),
     
  
  question("Is RStudio free to download and use?",
    answer("Yes",
           correct = TRUE,
           message = "The RStudio IDE is a software offered for free by the RStudio corporation. There are other, less common, IDEs to use R, such as Tinn-R and Emacs."),
    answer("No",
           message = "RStudio IDE is free and open-source.")
  ),
  
  question("Do you need to install both R and RStudio?",
    answer("Yes.",
           correct = TRUE, message = "While it is possible to work in R without an interface like RStudio, this is not recommended for beginners."),
    answer("No.",
           message = "You need to install both programs separately.")
  ),
  
  question("Once both programs are installed, which one should you open to begin working?",
    answer("RStudio",
           correct = TRUE,
           message = "Opening RStudio will automatically start R."),
    answer("R",
           message = "For beginners, it is best to work in R *through* RStudio. Open RStudio."))
)
```


#### Install R
To install R, visit this website https://www.r-project.org/ and download the latest version of R suitable for your computer. If your computer has shared drives or syncing software such as OneDrive, we recommend installing R and RStudio to a location such as "My Documents", but you should consult with your IT department on their recommended approach.  

#### Install RStudio
To install RStudio, visit this website https://rstudio.com/products/rstudio/download/ and download the latest free Desktop version of RStudio suitable for your computer.

#### R on a USB drive
It is possible to save R and RStudio to an external storage device such as a USB. Once you have them installed, copy all their folders onto your USB disc. Then, you will be able to use R on the devices you plug your USB into in the future.

#### Considerations for Shared Drives
Using shared drives or syncing tools such as OneDrive can make using R more difficult, especially when using R with collaborators. Talk with your organization's IT department about how to resolve issues, or see the "R on Network Drives" chapter of the [Epi R Handbook](www.epiRhandbook.com).  




## RStudio tour 

`r fontawesome::fa("eye", fill = "darkblue")` If you have RStudio installed, open it and observe the various panes. If the size of the text is too small or large, adjust it with the *View* menu. If you do not have RStudio installed, see the image below.  

```{r, eval = TRUE, echo = FALSE, out.width = "100%"}
# adding xfun::relative_path() creates a dynamic file path between the Rmd location and the here() path.
# It dynamically creates the ../../etc filepath.

knitr::include_graphics("images/rstudio_overview.png", error = F)
```

* Observe the major RStudio panes. How many panes do you see?  
     * You should see at least 3 panes:  
        * The **Console, Terminal, Render, and Jobs** pane (left or lower-left)  
        * The **Environment** (upper-right, which also holds the **Tutorials** that this exercise is in)  
        * The **Files, Plots, Packages, Help, and Viewer** panes (lower-right)   
     * If you see only these 3 panes, click *File -> New file -> R script* to open a new R Script and achieve the classic look pictured below. Now you will have the 4th pane, which is called the "Source" pane.  
     * Take a few minutes to familiarize yourself with the locations of the various panes, using the diagram below.  
     
#### The Source Pane  

This pane, by default in the upper-left, is a space to edit, run, and save your scripts. Scripts contain the commands you want to run. This pane can also display datasets (data frames) for viewing.

For Stata users, this pane is similar to your Do-file and Data Editor windows.

#### The R Console Pane

In the lower-left, you may need to click from "Jobs" tab to the "Console" tab to see the R Console (because this tutorial is running). This is the home of the R software itself, the “engine” where the commands are actually run and non-graphic outputs and error/warning messages appear. You can directly enter and run commands in the R Console, but realize that these commands are not saved as they are when running commands from a script.

If you are familiar with Stata, the R Console is like the Command Window and also the Results Window.

#### The Environment Pane

This pane, by default in the upper-right, is most often used to see brief summaries of objects in the R Environment in the current session. These objects could include imported, modified, or created datasets, parameters you have defined (e.g. a specific epi week for the analysis), or vectors or lists you have defined during analysis (e.g. names of regions). You can click on the arrow next to a data frame name to see its variables.

In Stata, this is most similar to the Variables Manager window.

This pane also contains History where you can see commands that you can previously. It also has a “Tutorial” tab where you can complete interactive R tutorials if you have the learnr package installed. It also has a “Connections” pane for external connections, and can have a “Git” pane if you choose to interface with Github.

#### Files, Plots, Packages, Help and Viewer Pane  

The lower-right pane includes several important tabs. The Files pane is a browser which can be used to open, rename, or delete files. Typical plot graphics including maps will display in the Plot pane. Interactive or HTML outputs will display in the Viewer pane. The Help pane can display documentation and help files. The Packages pane allows you to see, install, update, delete, load/unload R packages, and see which version of the package you have. To learn more about packages see the packages section below.

This pane contains the Stata equivalents of the Plots Manager and Project Manager windows.

`r fontawesome::fa("pen", fill = "brown")`  
For more detail on RStudio capabilities, download this PDF [RStudio IDE cheatsheet](https://raw.githubusercontent.com/rstudio/cheatsheets/main/rstudio-ide.pdf).  









## RStudio projects

### What is an RStudio project?  

Most of the time when you use R, it will make your life drastically easier to organize your work within an RStudio project.  

#### A self-contained and portable R environment  

```{r, eval = TRUE, echo = FALSE, out.width = "50%"}
# adding xfun::relative_path() creates a dynamic file path between the Rmd location and the here() path.
# It dynamically creates the ../../etc filepath.

knitr::include_graphics("images/project_briefcase.png", error = F)
```


An RStudio project is a **self-contained and portable R working environment** - it is **a folder for all the files associated with a distinct project (data files, R scripts, outputs, etc)**.  

* You can zip an RStudio project and email it to someone else. They should be able to open it and replicate your work exactly!  
* An RStudio project can be linked to a repository on version-control software like Git/Github  

If you do not work in an R project, it will be harder to organize files, to share your work with others, and you may encounter lots of frustration struggling to import files with something called the "working directory". When you use an R project, your scripts become much more easy to share and less likely to "break" when someone else uses them.  

### To create an R project

Creating an RStudio project is not required to complete this tutorial. But if you want to try on your computer, you can use the following instructions.  

To create an R project, select “New Project” from the RStudio File menu.

* If you want to create a new folder for the project, select “New directory” and indicate where you want it to be created (shown in the example below)
* If you want to create the project within an existing folder, click “Existing directory” and indicate the folder.
* If you want to clone a Github repository, select the third option “Version Control” and then “Git”. See the page on [Version control and collaboration with Git and Github ](https://epirhandbook.com/en/version-control-and-collaboration-with-git-and-github.html) for further details.

```{r rproject-gif, fig.margin = TRUE, echo = FALSE, fig.width = 3, out.width = "100%", fig.cap = ""}
knitr::include_graphics("images/rproject_create1.gif")
```


### Review your R project

Now, we can see the new folder that we created (/example), and within this folder is a new "R project" file ("example.Rproj"). Best practice for naming a project is using all lowercase letters with no spaces.

```{r rproject-folder-empty, fig.margin = TRUE, echo = FALSE, fig.width = 3, out.width = "50%", fig.cap = ""}
knitr::include_graphics("images/rproject_folder.png")
```

If you are working in an RStudio project, you will see the name of the project indicated in the upper-right corner of RStudio. If you are not in an RStudio project, it will read "Project: (None)". 


### An example RStudio project  

For example, if you had an RStudio project on your desktop in a folder called "intro_course", the contents might look like this:  

```{r, eval = TRUE, echo = FALSE, out.width = "75%"}
knitr::include_graphics("images/new_r_project_explorer.png", error = F)
```

In the folder, you will see a small file with an icon that looks like an box with an "R" on it - this is the RStudio project file (.Rproj).  

**To directly open the project next time, simply double-click this RStudio project file to open it. RStudio will open, and all your files for this project will be at-the-ready.**  

`r fontawesome::fa("eye", fill = "darkblue")` If you open the RStudio project, you will note that in the "Files" RStudio pane (lower-right) that you can also see and access the files/subfolders of your project.  

You can read more about RStudio projects in [this chapter of the Epi R Handbook](https://epirhandbook.com/en/r-projects.html).  





## Running R commands

### To open an R script

**Although creating a script is not taught and is not necessary for this tutorial, you typically work in R by drafting and running your commands from an R script.**  

If you have RStudio and R running on your computer, you would click *File -> New file -> R script*.  

```{r script-new, fig.margin = TRUE, echo = FALSE, fig.width = 3, out.width = "35%", fig.cap = ""}
knitr::include_graphics("images/new_script.jpg", error = F)
```

You should see a new empty space appear in the upper-left of RStudio. This space is the R script. To save the script, click the save icon above the script, or click *File -> Save As*.  

Note that the file extension for an R script is ".R". In working with R, you will encounter other extensions, but remember that this one is for R scripts.  

`r fontawesome::fa("eye", fill = "darkblue")` If you save the script into your RStudio project (e.g. in a "scripts" subfolder), it will be visible in the "Files" RStudio pane in the lower-right. Similarly, it should also appear in your File Explorer.    


```{r file-quiz, echo=F}
quiz(
  question("Which of these file names is an R script?",
           allow_retry = TRUE,
    answer("survey_analysis.Rproj", message = "No, this extension signifies an R project. You could click this to open RStudio and work on the project."),
    answer(".Rhistory", message = "No, .Rhistory is a special file that saves a record of commands and outputs. It is rarely viewed."),
    answer("cholera_plots.Rmd", message = ".Rmd signifies an 'R markdown' script, which is not a standard R script. You'll learn about R markdown later in the course."),
    answer("measles.R", correct = TRUE, message = "Yes, the .R signifies that this is an R script."),
    answer("pirate_ship.arrrrr", message = "No, this is just silly!")
  )
)
```


### A script is a list of instructions for R  

A script is a place to write instructions for R. A typical R script for public health analysis/reporting might include sections like:  

* Header containing information for the reader such as the script objective, authors, contact info, date last updated, etc.
* Load R packages
* Import the data
* Clean the data
* Perform summary and statistical analyses
* Display results as plots, tables, maps, etc.

In the example below, the green text preceeded by hash (#) symbols are "comments" or "notes" for the reader, or used to delineate sections of the script. The black text is R code commands.  

```{r script-example, fig.margin = TRUE, echo = FALSE, fig.width = 3, out.width = "85%", fig.cap = ""}
knitr::include_graphics("images/example_script.png", error = F)
```



### Write simple R commands  

`r fontawesome::fa("terminal", fill = "black")` Let's do some coding!

#### Get comfortable writing and running commands

In this tutorial, you run R commands by typing them in the codeboxes as described earlier. 

In RStudio, you can run R commands the following ways:  

1) Type the command directly into the *Console pane* (lower-left of RStudio) and press Enter.  
2) Type the command into a script, ensure that your cursor on this line of the script, and press the "Run" button in the upper-right of the script.  
3) Type the command into a script, ensure that your cursor is on this line of the script, and type Ctrl and Enter (or Cmd and Enter on a Mac).  
4) Use your mouse to highlight certain part of a command. Press "Run" or Ctrl+Enter to run only the highlighted code.   


#### R as a calculator  

**Let's begin with perhaps the most simple use of R, just to get comfortable running commands.**  

Below are common mathematical operators in R. These are often used to perform addition, division, to create new columns in datasets, etc. Spaces around the operators will not affect the command, but make the code more readable.

| Purpose             | Example in R |
|---------------------|--------------|
| addition            | 2 + 3        |
| subtraction         | 2 - 3        |
| multiplication      | 2 \* 3       |
| division            | 30 / 5       |
| exponent            | 2 \^ 3         |
| order of operations | ( )          |


**Delete the text below and type some simple mathematical commands into the R codebox below. Press "Run code" each time to see the result.**  

```{r openmath, exercise = TRUE}
Try to write some simple calculations here and press 'Run Code'
```

Note that R prints `[1]` before the result. This is simply to tell you that this result is the first result. Other more complex commands may result in multiple results printed.  

**Now, type a command in the codebox below to print the sum of 12, -99, 2, 147, and 29:**  

```{r simple-math, exercise = TRUE}
Try to write the code here
```

```{r simple-math-check}
grade_this({
  # custom checking code appears here
  if (.result == 12 + -99 + 2 + 147 + 29) {
    pass("Nice work, you wrote a pretty long calculation with R.")
  }
  fail("Press 'Start over' and try again")
})
```

```{r simple-math-hint}
Simply type the numbers into the console, with the appropriate operators between then, such as + or -. Do not forget that the second value is NEGATIVE.
```

```{r simple-math-solution, eval=FALSE}
12 + -99 + 2 + 147 + 29
```





Congratulations! You are using R as a basic calculator! Don't worry R will get much more fun very soon...  


### Medical supply chain exercise  


Now let's try an exercise that is more relevant to public health:  

You are managing a COVID testing campaign across 3 sites, and you need to place a supply purchase order for rapid tests for next month. **Based on the following information, how many tests do you need to order?**  

* Site 1 uses 200 per month  
* Site 2 uses 550 per month  
* Site 3 has 2 sub-sites that each need 925 tests per month  
* You should order 10% extra as a buffer against higher demand  
* You have 420 tests extra remaining from last month, which you can use in the coming month  

Look through the **multiple hints** if you have trouble.

```{r supply, exercise = TRUE}
Write your command here
```

```{r supply-check}
grade_this_code("You got it correct! You should order 2440 tests for next month's testing operations.")
```

```{r supply-hint}
Write a command that uses the numbers above, with +, -, and * . Also use parentheses ( ) to run certain operations first. 
```

```{r supply-hint-2}
Use parentheses ( ), the asterisk multiplication operator, and the addition + and subtraction - operators. First, total the known needs (200, 550, and two times 925). Wrap that all in parentheses, because you need to multiply that sum by the desired buffer (110%, but in decimal form as 1.1). That total should also be wrapped in parentheses, because you need to then subtract the extra remaining from the previous month.
```

```{r supply-hint-3}
((200 + 550 + (925 * 2)) * 1.1) - 420
```

```{r supply-solution, eval=FALSE}
((200 + 550 + (925 * 2)) * 1.1) - 420
```


#### Adjust the equation  

How many tests would you need to order if each of the Site 3 sub-sites needed only 800 tests, instead of 925? Write the command you used above, but modify for the new scenario.  
```{r supply-adjust, exercise = TRUE}
Write your command here
```

```{r supply-adjust-check}
grade_this_code("You got it correct! You should order 2165 tests in this scenario.")
```

```{r supply-adjust-hint}
Replace the 925 with 800 and re-run the command
```

```{r supply-adjust-hint-2}
((200 + 550 + 800 * 2)) * 1.1) - 420
```

```{r supply-adjust-solution, eval=FALSE}
((200 + 550 + (800 * 2)) * 1.1) - 420
```

You can see how changing the equation to account for updated might get difficult. Soon we'll learn a different approach to solving this problem.  




### Documentation  

`r fontawesome::fa("pen", fill = "brown")` It is important to write your code so that other people have an easy time reading it! In fact, if you return to this code one or two months later, you may need help remembering why you wrote this command. 

Any text written to the right of a "hash" symbol (#) is ignored by R as it runs commands in a script. So, you can use these symbols to write "comments" throughout the script. 

If you were writing a proper R script, it might look like the code below:  

- A header that describes the purpose of the command  
- Some detailed instructions about the command  
- **Spaces** around all the mathematical operators as shown below  

Future readers of your code will thank you!  

```{r eval = F, echo=T}
# Purpose: Calculate monthly order for testing supplies
# Author: Neale Batra
# Last updated: 31 March, 2022  
# Contact email: contact@appliedepi.org

# Site 1 uses 200 per month  
# Site 2 uses 550 per month  
# Site 3 has 2 sub-sites that each need 925 tests per month  
# Order 10% extra as a buffer against higher demand  
# At the end, subtract the number of tests remaining from last month  

((200 + 550 + (925 * 2)) * 1.1) - 420

```







## Creating objects  

### Types of objects  

R is built to allow you to store "*objects*" for later use. If you are using RStudio, they are displayed in your R **Environment**, which is visible in the Environment pane (upper-right). In this tutorial, objects are still stored, but you just won't be able to see them.  

Everything you store in R - datasets, variables, a list of village names, a total population number, even outputs such as graphs - are **objects** which are **assigned a name** and **can be referenced** in later commands.

In a given script you may create ("define") and re-define hundreds of objects. Some examples of objects include:  
     
* Single values, of the class: 
     * Numeric (e.g. `2`)
     * Logical (`TRUE` or `FALSE`)  
     * Character (e.g. `"Kigali"`)  
* A "data frame" (a dataset imported into R from an Excel, CSV, or other file format)
* A "vector" (sequence or list of single values, such as which colors to use in a plot)  
     
We'll talk more about the various types of objects later, but for now let's practice defining simple objects. 



### The assignment operator  

**Create objects by assigning them a value with the "assignment operator", that is: `<-`**  

You can think of the assignment operator <- as the words **“is defined as”**.

This operator looks like an arrow, and it takes the **value** of the right side, and assigns it to the **name** on the left. Assignment commands generally follow a standard order:

>**object_name <- value** (or calculation/process that produces a value)

By running the command with the assignment operator, you can **create** an object, or by re-running the command you can **re-define** the object with a new value.  

The keyboard shortcut to create the `<-` is Alt and - (Windows) or Option and - (Mac).  


#### R Environment  

`r fontawesome::fa("eye", fill = "darkblue")` In RStudio, the upper-right pane is called the "Environment". In this tutorial, we only practice the coding, but you will still be creating objects and saving them into a virtual environment.  

Here is an image of an empty RStudio environment:  

```{r, eval = TRUE, echo = FALSE, out.width = "100%"}
# adding xfun::relative_path() creates a dynamic file path between the Rmd location and the here() path.
# It dynamically creates the ../../etc filepath.

knitr::include_graphics("images/empty_environment.png", error = F)
```


See this command below:  

```{r, echo=TRUE, eval=F}
confirmed_cases <- 34
```

This command creates the object `confirmed_cases`, and assigned it the value `34`. This means that in R, we can run other commands using the name `confirmed_cases`, and R will know that we are referring to the value 34.

In the codebox below, do the following:  

1) Write a command to create an object called `confirmed_cases`, and define it with the assignment operator `<-` as the value `34`. Then click the "Run Code" button.

```{r confirmed-cases, exercise = TRUE}
Write your command(s) here
```

**What is the output printed below the codebox?** The correct output is... **nothing**.  

`r fontawesome::fa("bookmark", fill = "orange")` **Remeber this!** You are now learning the difference between two fundamentally different types of R commands:  

1) Commands that *assign a value* and,  
2) Commands that *ask R to print something*  

Whenever you run a command in R, you must ask yourself: **"What am I asking R to do?"**  
Are you asking R to print something, or assign a value to something?  

If your command includes the assignment operator `<-`, then you are asking R to assign a value, and R will not return a printed output. Instead, the value may be stored, updated, and ready for use in a later command.  


#### Naming objects  

`r fontawesome::fa("pen", fill = "brown")` A quick note about naming objects:  

* **Object names must not contain spaces**, but you should use underscore (_) or a period (.) instead of a space.
* **Object names are case-sensitive** (meaning that Dataset_A is different from dataset_A).
* **Object names must begin with a letter** (cannot begin with a number like 1, 2 or 3).  
* Typically, coders write object names in all lowercase, but this is a stylistic choice  
* Keep your object names short - it is much easier to code with short names  

`r emo::ji("cross mark")` `my object name`  
`r emo::ji("cross mark")` Having both `dataset` and `Dataset`  
`r emo::ji("cross mark")` `2nd_wave_of_cases_from_Santa_Clara_County`  

`r emo::ji("check")` `cases_zambia`  
`r emo::ji("check")` `linelist_raw`  
`r emo::ji("check")` `lab_20140216`  

Note: in R literature, you may often see people using `df` as an object name. This is a shorthand way to refer to the fact that the object they are saving is a "data frame" (R's name for a dataset with columns and rows).  


1) Write the same command that you ran above, but this time add a *second command* on a new line that is only the name `confirmed_cases`. Then click the "Run Code" button.

```{r confirmed-cases-print, exercise = TRUE}
confirmed_cases <- 34
Write your next command here
```

```{r confirmed-cases-print-hint}
confirmed_cases <- 34
confirmed_cases
```

```{r confirmed-cases-print-solution, eval=FALSE}
confirmed_cases <- 34
confirmed_cases
```

```{r confirmed-cases-print-check}
grade_this_code("Correct, you are running one statment that assigned the name confirmed_cases with the value 34, and the next command asks R to print the current value of confirmed_cases.")
```

See how this new command, `confirmed_cases`, tells R to print the current value of the object `confirmed_cases`.  


3) **Now, using the same approach, define an object named `suspect_cases`, assign the value `12`, and in a separate command, ask R to print the value.**  


```{r suspect-cases, exercise = TRUE, exercise.lines = 4}
confirmed_cases <- 34
confirmed_cases
Write your next commands here
```

```{r suspect-cases-hint}
confirmed_cases <- 34
confirmed_cases
suspect_cases <- 12
suspect_cases
```

```{r suspect-cases-solution, eval=FALSE}
confirmed_cases <- 34
confirmed_cases
suspect_cases <- 12
suspect_cases
```

```{r suspect-cases-check}
grade_this_code("Correct, you have added a command that defines the object suspect_cases as the value 12, and another command that prints the value of suspect_cases.")
```


**Now, write and run the following command in the codebox below.** See how you can now reference the values by calling only the assigned names.   

```{r, echo=TRUE, eval=F}
total_cases <- confirmed_cases + suspect_cases
```

Add the above command to define `total_cases`, and add a final command to print the value of `total_cases`. Your input should contain 6 lines of code.  

```{r total-cases-print, exercise = TRUE, exercise.lines = 6}
confirmed_cases <- 34
confirmed_cases
suspect_cases <- 12
suspect_cases
Write your next commands here
```

```{r total-cases-print-hint}
confirmed_cases <- 34
confirmed_cases
suspect_cases <- 12
suspect_cases
total_cases <- confirmed_cases + suspect_cases
total_cases
```

```{r total-cases-print-solution, eval=FALSE}
confirmed_cases <- 34
confirmed_cases
suspect_cases <- 12
suspect_cases
total_cases <- confirmed_cases + suspect_cases
total_cases
```

```{r total-cases-print-check}
grade_this_code("Correct!")

#grade_this(
  #fail_if(!exists("total_cases", .envir_result), "Sorry I do not see that you defined the object total_cases."),
  #pass_if(~identical(.result, 46), "Yes this is correct")
  #fail_if(exists("total_cases", .envir_result) && .result != 46, "Your object total_cases is not equal to 46, the sum of suspect and confirmed cases."),
  #pass_if(exists("total_cases", .envir_result) && .result == 46, "Correct, your total_cases is equal to 46"),
#)
```



### Re-defining objects  

What happens if you receive news that there are 10 additional confirmed cases?  

In these codeboxes, all of the R code written in the box is run at the same time - this means that you can edit the first command to read `confirmed_cases <- 44`, re-run the code, and the value of `total_cases` will also increase by 10.

However, if you are running the command in a script in RStudio, you must be careful to re-run all the commands as well. Simply changing the first command to `confirmed_cases <- 44` does **not** update the value `total_cases` to `56`. Just because you change a written value in your code, it does **not automatically update** the rest of your script, nor does it change any values stored in R!  

**You must re-run the commands** in order for the changes to be registered by R.  

```{r, quiz-case2-math, echo=F}
quiz(
   question_checkbox("Select all the steps that must happen for total_cases to be updated to 56?",
    answer("Run the command: confirmed_cases <- 44",
           message = "Yes, first the confirmed_cases must be re-defined",
    correct = T),
    answer("Run the command: total_cases <- confirmed_cases + suspect_cases",
           message = "Yes, second, the total must be updated with the new number of confirmed cases",
    correct = T),
    answer("Send a donation to Applied Epi",
           message = "No, donating to Applied Epi will not make your R code update."),
    allow_retry = TRUE
  )
)
```

You must update two commands to update the value of `total_cases` (and they must be run in the correct order!). Thankfully in these codebox tutorials this simply is done by revising the commands and pressing "Run Code". Try it below (we have removed some of the printing commands, for clarity):  

```{r total-cases-update, exercise = TRUE, exercise.lines = 6}
confirmed_cases <- 34
suspect_cases <- 12
total_cases <- confirmed_cases + suspect_cases
total_cases
```

```{r total-cases-update-hint}
confirmed_cases <- 44
suspect_cases <- 12
total_cases <- confirmed_cases + suspect_cases
total_cases
```

```{r total-cases-update-solution, eval=FALSE}
confirmed_cases <- 44
suspect_cases <- 12
total_cases <- confirmed_cases + suspect_cases
total_cases
```

```{r total-cases-update-check}
grade_this_code("Correct!")

#grade_this(
  #fail_if(!exists("total_cases", .envir_result), "Sorry I do not see that you defined the object total_cases."),
  #pass_if(~identical(.result, 46), "Yes this is correct")
  #fail_if(exists("total_cases", .envir_result) && .result != 46, "Your object total_cases is not equal to 46, the sum of suspect and confirmed cases."),
  #pass_if(exists("total_cases", .envir_result) && .result == 46, "Correct, your total_cases is equal to 46"),
#)
```





### Running commands in RStudio scripts:  

If you are typing commands in RStudio, you might wonder - "why do I need to run each line of my script one-by-one?". Well, you don't have to! You have two options to run multiple commands at once:  
1) Use your mouse to highlight both commands in the script, and run  
2) If you want to run ALL the commands in your script, from top-to-bottom, select all the commands by pressing Ctrl + a (Cmd + a for Mac), and click "Run"  


Before you run the entire script, consider whether you have any unfinished code above your current selection that might cause an Error. Remember, you are asking R to run *every command in the entire script*, and R will stop if it encounters an error.   

If there is one command you want to temporarily remove, place a # symbol at the beginning of this line to the left of the code. R will ignore this line. 








### Medical supply chain commands  

`r fontawesome::fa("terminal", fill = "black")` 
Let's continue our exercise from the previous section that uses the testing supply chain example. As a reminder: you are managing a COVID testing campaign across 3 sites, and you need to place a supply order for rapid tests for next month. You have the following information:  

* Site 1 uses 200 per month  
* Site 2 uses 550 per month  
* Site 3 has 2 sub-sites that each need 925 tests per month  
* You should order 10% extra as a buffer against higher demand  
* You have 420 tests extra remaining from last month, which you can use in the coming month  

You wrote this command to return the need for tests next month:  

```{r eval = F, echo=T}
((200 + 550 + (925 * 2)) * 1.1) - 420
```

**Re-write this command so that it is organized into 5 distinct commands.** The first four should define the values of objects `site`, `site2`, `site3` and `extra`. The final command should use those objects to print the number of tests needed.  

```{r supply-update, exercise = TRUE, exercise.lines = 6}
site1 <- ___
site2 <- ___
site3 <- ___
extra <- ___

Fill the blanks above, then write your new equation here that references the object names instead of raw numbers
```

```{r supply-update-hint}
Your final equation will look like this...  ((site1 + site2 + site3) * 1.1) - extra
```


```{r supply-update-solution, eval=FALSE}
# define values (objects) for use in the calculation
site1 <- 200
site2 <- 550
site3 <- 925 * 2
extra <- 420

# run this command to print the amount needed to order
((site1 + site2 + site3) * 1.1) - extra
```

```{r supply-update-check}
grade_this_code("Correct! You practiced creating series of commands that assign values to objects, which are then referenced in a later command. Nice job!")

#grade_this(
  #fail_if(!exists("total_cases", .envir_result), "Sorry I do not see that you defined the object total_cases."),
  #pass_if(~identical(.result, 46), "Yes this is correct")
  #fail_if(exists("total_cases", .envir_result) && .result != 46, "Your object total_cases is not equal to 46, the sum of suspect and confirmed cases."),
  #pass_if(exists("total_cases", .envir_result) && .result == 46, "Correct, your total_cases is equal to 46"),
#)
```


Now that you have organized your commands, it will be easier to re-run the command at a later date, and to share it with a colleague who needs to run it.

Use the codebox below and the commands you wrote to answer the quiz question below.  


```{r formula-change, exercise = TRUE}


```


```{r, quiz-tests-math, echo=F}
quiz(
   question("How many tests should you order if site 1 needs 250, site 2 needs 730, site 3's two sites need 1050 each, and you have 37 extra from the previous month?",
    answer("3253", message = "Check your parentheses - is 1.1 multiplied on ALL of the sites, as it should be?"),
    answer("3351", correct = TRUE, message = "Nice work!"),
    answer("2980", message = "You have made an incorrect calculation, check your code against the solution"),
    allow_retry = TRUE
  )
)
```

`r fontawesome::fa("pen", fill = "brown")`
For extra credit, further modify your code to address the following two questions:  

```{r, quiz-adjust-calc, echo=F}
quiz(
   question("If you wanted to assign the final output value to an object, for later reference, what operator would you add, and where?",
    answer("Add a plus symbol to the end", message = "No, there is no need for an additional plus symbol. Assigning is done with the assignment operator?"),
    answer("Add a new object name and the assignment operator to the left of the final equation.", correct = TRUE, message = "Nice work!"),
    answer("Add the & symbol to the left of the final equation.", message = "There is no need for an & symbol, assigning is done with the assignment operator."),
    allow_retry = TRUE
  )
)
```


```{r, quiz-adjust-calc2, echo=F}
quiz(
   question("Select the ways that you could modify your script if the two sub-sites of site 3 needed different numbers of tests?",
    answer("Give each site its own object name and command, and adjust the equation accordingly.", correct = TRUE, message = "Yes you could split them out into their own commands."),
    answer("Multiply the site3 value by 4", correct = FALSE, message = "No this would not be correct."),
    answer("Define site3 as one value plus another distinct value", correct = TRUE, message = "Yes, you could also define site3 as the sum of two distinct numbers."),
    allow_retry = TRUE
  )
)
```




### Commenting  

In RStudio, you will have now begun to write a useful script to calculate the number of tests to order! But what if your colleague wants to use it? Will they be able to understand your logic and commands?  

Here is an example of a well-documented script. Note how clear it is to read - each section is clearly demarcated with plentiful spaces and newlines.  

```{r, eval = TRUE, echo = FALSE, out.width = "100%"}
knitr::include_graphics("images/example_script.png", error = F)
```

Together, we will make your R script well-documented.  


#### Using the # (hash) for comments  

As demonstrated earlier, any text written to the *right* of the hash symbol is ignored by R as it runs commands. As a result you can place the hash symbol:  

* At the beginning of a line to prevent the entire line from being run. For example, at the top of your script you can write an informative section:  

```{r eval = F, echo=T}
# Purpose: Calculate monthly order for testing supplies
# Author: (your name)
# Last updated: (date)  
# Contact email: (your email)

# define values (objects) for use in the calculation
site1 <- 200         
site2 <- 550         
site3 <- 925 * 2     
extra <- 420         

# run this command to print the amount needed to order
((site1 + site2 + site3) * 1.1) - extra

```

* You can also place the # to the left of some code, to write comments on the same line as the code:  

```{r, eval=F, echo=T}
# Purpose: Calculate monthly order for testing supplies
# Author: (your name)
# Last updated: (date)  
# Contact email: (your email)

# define values (objects) for use in the calculation
site1 <- 200         # needs for site 1
site2 <- 550         # needs for site 2 
site3 <- 925 * 2     # needs for site 3 subsites
extra <- 420         # number of tests remaining from last month

# run this command to print the amount needed to order
((site1 + site2 + site3) * 1.1) - extra


```


Use the code box below to practice writing # comments around the code:  

```{r open-comments, exercise = TRUE}
site1 <- 200         
site2 <- 550         
site3 <- 925 * 2     
extra <- 420         

((site1 + site2 + site3) * 1.1) - extra
```



#### Sections headings  

**If you are working in RStudio**, you can utilize a keyboard shortcut to insert a section header into your script. You would place your cursor where the new section should start and press Ctrl, Shift, and R at the same time (or Cmd Shift R on a Mac). The new section header should look something like this:  

```{r, eval = F, echo=T, results = "asis"}
# Monthly supply needs ----------------------------------------------

```

RStudio will recognize this section, and it will appear in the script "Outline". This clickable Outline tool can be very useful to navigate scripts with hundreds or even thousands of lines.  

```{r, eval = TRUE, echo = FALSE, out.width = "100%"}
knitr::include_graphics("images/section_headings.png", error = F)
```




### Character objects  

Defined objects can also be "character", meaning letters and symbols that are not numbers. Character values are distinguished by being placed within quotation marks, like "New York City" or "dm76wk34" (a randomly-generated case unique identifier).  

Note that the character objects can be created with, like "exposed", or can be created with single quotes like 'infected' - these have the same effect (sometimes it is useful to place single quotes within double quotes).  

Note that thirty-four could be written in R as:  

* `34` (a numeric value, capable of being used in mathematic calculations), or  
* "34" (a character value, not capable of calculations)  
     
When your R script recognizes that something you have written is a character value (once the first and last quote marks are written) it will turn a different color. See below.  

Write commands in the codebox below to define some objects as character values, followed by commands that prints their values, like we did with `confirmed_cases`.  
Experiment a bit - what happens if you try to add `30` + "12"?  

```{r, echo=T, eval=F}
# Try these commands

# define the objects patient_name and occupation
patient_name <- "Olivier"
occupation <- "nurse"

# print the values
patient_name
occupation

# Try to add a numeric and character objects (will result in error)
30 + "12"
```

```{r open-characters, exercise = TRUE}
Try writing some code here
```


## Functions  

The previous exercises have been relatively simple coding. We used mathematical operators to perform calculations. But this is not really showcasing R's abilities! Those exercises were simply to have you practice running commands and creating simple objects.  

**The real power of R comes from *functions***. Functions are at the core of using R. Functions are how you perform tasks and operations.  

### A function is like a machine  

A function receives inputs, does some action with those inputs, and produces an output. What the output is depends on the function.  


### Simple functions  

Functions typically operate upon an object placed within the function’s parentheses. For example, the function `sqrt()` returns the square root of a number:

```{r, echo=T}
sqrt(64)
```

Likewise, the function `sum()` accepts an unlimited number of numeric values and returns the sum. 

```{r, echo=T}
sum(2, 5, 10, -8, 100)
```

`r fontawesome::fa("terminal", fill = "black")` Time for you to practice this coding in RStudio! In your R script (named "demo.R"), use the function `min()` and `max()` to find the minimum and maximum of the numbers 3, 55, 9, -4, and 33.  

We won't do a quiz, because the answers should be quite easy... but did your code work?  

```{r, echo=T}
# calculate the minimum value
min(3, 55, 9, -4, 33)

# calculate the maximum value
max(3, 55, 9, -4, 33)
```




### Vectors  

Try the function `c()`. What does that function do? The "c" represents the term "concatenate", because this function combines the values within its parentheses into one unit.

We call this unit a **vector**. A vector is a unit of several values, *which must be of the same class* (either all numeric, all character, all logical, etc.) and *must be separated by commas*.   

Vectors may seem abstract right now, but will be useful in later modules of this course. For example, you may need to create a vector of column names that will be printed in a table, or a vector of colors to use in a plot.  

See this example, where we create a named vector of numeric values (the ages of 5 patients).  

```{r, echo=T}
# create a vector of patient ages
patient_ages <- c(5, 10, 60, 25, 12)
```

Try the above command in your R script. Now, what happens when you run the command `patient_ages`? All the numbers appear in the R Console.  

It is useful that these numbers can be referenced by one name, because now we can apply changes to all of them with just one step:  

```{r, echo=T}
patient_ages * 2
```

Now, I'm not sure why we would need to multiply all the patient ages by 2, but it sure was easy, wasn't it?!

Try creating your own vector - make a vector of some names of districts/cities/counties in your home region. Name it `jurisdictions`. Does your command look similar to this?  

```{r, echo = T}
# A character vector of jurisdiction names in Mozambique  
jurisdictions <- c("Maputo", "Inhambane", "Gaza", "Zambezia", "Manica", "Sofala")
```

What can we do with a character vector? We cannot multiply it by 2... for fun, let us **put this vector in another function**: `toupper()`, which changes all of the characters to upper case:  

```{r, echo=T, eval=F}
toupper(jurisdictions)
```

Note: Even though the vector contains character values, when typing the *name* of the vector, you do not use quotes. It is an R object just like `confirmed_cases`, and so should be written plainly in code.  

**What does the output look like?** What if you try the function `tolower()`? This could be useful to standardize names or other character words when joining two datasets!  








### Functions with named arguments  

Most functions you will encounter in R have *named arguments*, which means you need to specify the settings under which the function will operate.  

```{r, eval = TRUE, echo = FALSE, out.width = "50%"}
# adding xfun::relative_path() creates a dynamic file path between the Rmd location and the here() path.
# It dynamically creates the ../../etc filepath.

knitr::include_graphics("images/arguments-buttons.png", error = F)
```


Let's return to the character vector `jurisdictions` that you defined earlier. We will use the names from the example, but your vector may include other jurisdictions local to your home region.  

Imagine you have this vector of jurisdiction names, but when you run `jurisdictions` in R to print the list of jurisdictions, it looks ugly and is not very readable.  

```{r, echo=T}
jurisdictions
```

You know that R has the ability to make automated reports (which you will learn later in this course). It is very possible that you will want to combine these jurisdiction names in a way that they can be printed in a report - with commas between them for proper punctuation.

The function `paste()` will accept a vector of multiple character values, and combine them into **one** character value. Even better, with your help it will insert some characters *in between* each of the old values (e.g. a space, or a comma, or both!).  

The function `paste()` has an **argument** that is named `collapse`.  

Arguments are written *within the parentheses with a single equals sign*, so we will refer to this argument as `collapse = `. If there are multiple arguments for one function, they are written with commas between them.  

See the result:  

```{r, echo = T}
paste(jurisdictions, collapse = ",")
```

Let's understand what is going on:  

```{r, results = "asis", echo = FALSE}
"The first argument expects the name of a vector, in this case: jurisdictions" %>%
  flair::flair("jurisdictions", color = "deeppink") %>%
  flair::flair_all(before = "<h4>", after = "</h4>") %>%
  cat()
```

Often, the first argument of a function is data to be operated upon, and does not require a name nor an equals sign.  

```{r, results = "asis", echo = FALSE}
"The second argument is collapse =, to which we provide a character value to appear between each of the words." %>%
  flair::flair("collapse =", color = "orange") %>%
  flair::flair_all(before = "<h4>", after = "</h4>") %>%
  cat()
```


In the example above, we have chosen ", " which is a comma. The quotation marks ensure that R understands that this is a character value.  

```{r arguments, include = F}
paste(jurisdictions, collapse = ",")
```

```{r arguments_flair, echo = FALSE}
flair::decorate("arguments") %>%
  flair::flair("jurisdictions", color = "deeppink") %>% 
  flair::flair("', '", color = "orange") %>% 
  flair::flair("collapse", color = "orange") %>% 
  flair::knit_print.with_flair()
```

`r fontawesome::fa("terminal", fill = "black")` 
Replicate the code above with your `jurisdictions` vector in RStudio. 

**How would you adjust the code to add a space after each comma?**


<!--
NOTE: Below is the solution (all within details tags collapsed)
-->

<details>
<summary style='text-decoration: underline; color: red;'>`r fontawesome::fa("check", fill = "red")`Click to see a solution (try it yourself first!)</summary>
</br>

```{r eval = F, echo=T}
# Note the space after the comma, within the quotation marks
paste(jurisdictions, collapse = ", ")
```

Note how this function knows to not place a comma after the last value in `jurisdictions`.  

</br>
</details>
<!--
NOTE: End of solution
-->


#### Optional arguments  

Often, functions have many arguments... you must become familiar with each function in order to know what it expects. Don't worry! R coders do not have encyclopedic brains - we look up this information all the time while coding.  

Thankfully, most arguments in a function have **default values**.  

For example, functions that make plots may be able to be adjusted in dozens of ways (`title = `, `subtitle = `, `color = `, etc.). But most of these arguments have **default values**, meaning that *you do not need to supply a value to that argument* for the function to successfully run. Instead, you can write the argument and its assigned value *if you wish*.  

In the `paste()` exercise above, `collapse = ` is an optional argument. You can use the function `paste()` without specifying a value to `collapse =`.  



#### Getting help  

A function's arguments and any default values can be read in the function's *documentation*. To read the documentation, search the name of the function in the **Help pane** in the lower-right of RStudio. Alternatively, type `?` before the function name in the RStudio **Console** pane (for example, `?paste`).  

The documentation details will look something like this (we can help you interpret, as they can be difficult to understand at first):  

```{r, fig.margin = TRUE, echo = FALSE, fig.width = 3, out.width = "60%", fig.cap = ""}
knitr::include_graphics("images/r-help.png", error = F)
```



```{r quiz-args-identify}
quiz(
  question("what are the arguments in the following command:\n\nage_pyramid(data = linelist, split_by = 'gender', age_group = 'agecat5', proportional = TRUE)",
    answer("linelist, split_by, age_group, proportional", message = "Careful! linelist comes after an equals sign. It is the value assigned to the argument data = "),
    answer("data, split_by, age_group, proportional", correct = T),
    answer("age_pyramid, linelist, 'gender', proportional", message = "age_pyramid is the function, and linelist is the value assigned to the argument data = "),
    allow_retry = T
  )
  )
```


```{r quiz-args-required}
quiz(
  question("All R functions have multiple arguments that require input",
    allow_retry = T,
    answer("True"),
    answer("False", correct = TRUE, message = "Not all functions have multiple arguments, and typically for functions with multiple arguments, many have default values that do not need to by supplied.")
  )
)
```








### Creating functions  

The magic of R really happens when you **create your own functions**. This is an advanced skill that we do not cover in this course, and you do not typically need to create functions until you are a more experienced R user. You do not need to try this code, unless you want to. This is purely background information.  

However, this aspect of R is where its versatility really begins to shine. Imagine if you could convert your entire workflow into one command?

For demonstration purposes, below, the testing supply chain script from the previous section is converted into a function:  

```{r, echo=T}
# create a function that accepts 4 inputs (1 is optional) and returns the 
# needs, based on the equation  

# create the function calc_test()
calc_tests <- function(site1, site2, site3, extra){   # list the arguments, and open the function
     
     needs <- ((site1 + site2 + site3)*1.1) - extra   # We embed the equation inside the function
     return(needs)                                    # the function returns the result
}                                                     # close the function

```

Once the above code is run, the function is defined (it will appear in the R environment pane just like the other objects).  

Now that the function has been defined, we can use it to run the equation given values for the arguments, like this:  

```{r, echo=T}
calc_tests(site1 = 200, site2 = 550, site3 = (925*2), extra = 420)
```

See how we've wrapped up all the code into a function! Very cool. Think of the possibilities...

If you write a function that is useful to others, you can publish it in an **R package** - a unit of multiple related functions. Everyone else can test and try your functions, and your work can help people around the world! ***This is the beauty of open-source software***.  




## Packages

Until now, you have used R functions that come installed with R. For example, `sum()`, `c()`, and `min()`.  

These are called {base} R functions, and they represent a very small portion of all R functions available to you.  

An **R package** is a shareable bundle of related functions that you can download and use. Packages typically have a theme, for example:  

* The {stringr} package provides functions for working with "strings" (character values)  
* The {lubridate} package provides functions that make it easier to work with dates  
* The {epikit} package provides functions useful in epidemiological analysis  

You can see that the names of packages are often clever puns - the fun spirit of the R community is evident.  



### CRAN  

**To install most R packages, use R commands to download the package from "CRAN" to your computer's "R library".**

Many R users create specialized functions, which they share in packages with the R community to verify.  

For packages to be widely distributed, they must be shared on the **Comprehensive R Archive Network (CRAN)**, which is R's central software repository - an archive of R packages that have passed basic scrutiny.  

As of March 2022, there are 19,020 packages available on CRAN. Some of these are immensely popular, with hundreds of thousands of downloads each month. 



### Security  

Are you worried about viruses and security when downloading a package from CRAN? Read [this article](https://support.rstudio.com/hc/en-us/articles/360042593974-R-and-R-Package-Security) on the topic.


### Install and load packages  

Once a package is **installed**, it is stored in **your R “library”**. You can then access the functions it contains by **“loading”** the package for use during your current R session .

Think of R as your personal library: *when you install a package, your library gains a new "book" of functions. But each time you want to use a function from that book, you must borrow (“load”) it from your library.*

```{r, fig.margin = TRUE, echo = FALSE, fig.width = 3, out.width = "50%", fig.cap = ""}
knitr::include_graphics("images/bookshelf1.png", error = F)
```

In summary: to use the functions available in an R package, 2 steps must be implemented:

1. The package must be installed (once), and
2. The package must be loaded (each R session)


#### Code for installing packages

Remember how we said there are {base} R** functions? There is a {base} R function to install packages, and it is `install.packages()` (note that "packages" is written in plural).  

The name of the package to install must be provided in the parentheses and in quotes. If you want to install multiple packages in one command, they must be listed within a character vector `c()`. Note that package names are case sensitive.  

```{r packages-base, echo=T, eval=F}
# install a single package with base R
install.packages("tidyverse")

# install multiple packages with base R
install.packages(c("tidyverse", "rio", "here"))
```

`r fontawesome::fa("exclamation", fill = "red")` 
Note: this command installs a package, but does not load it for use in the current session.


`r fontawesome::fa("terminal", fill = "black")` **Now you try it: install the package "pacman".** If a pop-up window asks if you want to re-start R, say "No".  


<!--
NOTE: Below is the solution (all within details tags collapsed)
-->

<details>
<summary style='text-decoration: underline; color: red;'>`r fontawesome::fa("check", fill = "red")`Click to see a solution (try it yourself first!)</summary>
</br>

```{r eval = F, echo=T}
install.packages("pacman")
```

</br>
</details>
<!--
NOTE: End of solution
-->

#### Code for loading packages  

Do you remember how often you need load a package? Every time you start R. 

You can do this using the {base} R function `library()`.  

**Try this command in RStudio.**  

```{r, echo=T, eval = FALSE}
# Loads the package pacman for use in the current R session
library(pacman)
```


### pacman  

**We had you install the package "pacman" because it contains functions to make it easier to quickly install and load other functions**.  

Its name refers to "**pac**kage **man**ager", not the video game character.  

Can you imagine the potential complications caused when sharing R scripts with someone else? Do they have the same R packages that you have?  

You don't want them to have to search through the script to find which packages you used in the script... so should you write `install.packages()` commands at the top of the script? And then all of the `library()` commands as well? If you use 15 packages, that is a lot of lines... and potentially a lot of unnecessary installations...

One solution is {pacman}'s function `p_load()`. You can list the names of packages inside, and it will install each package *only if it is not already installed*. Additionally, it will load each package for use in the R session. It is a very efficient option - you can include it at the top of your script. If your colleague receives the script, as long as they have {pacman} already, the script will only install the packages they do not already have, and will load all of them for use.  

Here is what a {pacman} command can look like. The syntax is quite simple. Just list the names of the packages within the `p_load()` parentheses, separated by commas. Note that package names are case-sensitive.  

**Write this command at the top, as the first command in your R script.**   

```{r, echo=T, eval=F}
pacman::p_load(rio, here, janitor, lubridate, tidyverse)
```

The syntax `pacman::p_load()` explicitly writes the package name (`pacman`) prior to the function name (`p_load()`), connected by two colons `::`. This syntax is useful because it also loads the {pacman} package (assuming it is already installed). 

This command can also be written vertically. **In any R command, the newlines and indenting will not impact the execution of the code.** But it can dramatically improve readability!  

**Edit your command so that it looks like this.**  

```{r, echo=T, eval=F}
# Load all the packages needed, installing if necessary
pacman::p_load(
     rio,          # for importing data
     here,         # for file paths
     janitor,      # for data cleaning
     lubridate,    # for working with dates
     tidyverse     # for data management
)
```

 


```{r quiz-packages-install}
quiz(caption = "Quiz - packages",
  question("How often do you need to install a package on your computer?",
    allow_retry = T,
    answer("Every time you restart R", message = "Packages only need to be installed once. There is no relation to restarting R."),
    answer("Only once", correct = TRUE, message = "Packages must be installed once. After a long time, you may want to update them by re-installing."),
    answer("Never (assuming you are connected to the internet)", message = "Packages must be installed once. You can not access them dynamically through the internet."),
    answer("Each time you restart your computer", message = "Packages only need to be installed once. There is no relation to restarting your computer.")
  ),

  question("How often do you need to load a package?",
    allow_retry = T,
    answer("Every time you start or restart R", correct = TRUE, message = "Packages must be loaded each time you start an R session."),
    answer("Only once", message = "Packages must be installed only once, but must be loaded at the beginning of each R session."),
    answer("Never (assuming you are connected to the internet)", message = "Packages must be installed once and loaded at the beginning of each R session. You can not access them dynamically through the internet."),
    answer("Each time you restart your computer", message = "Packages only need to be installed once and loaded at the beginning of each R session. There is no relation to restarting your computer.")
  ),

  question("Newlines and indents can be used to improve readability without impacting code execution.",
    allow_retry = T,
    answer("True", correct = TRUE),
    answer("False")
  ),

  question("The pacman function p_load() does which of the following (select ALL that apply).",
    allow_retry = T,
    answer("Installs the packages if it is not yet installed", correct = TRUE),
    answer("Loads the packages for use", correct = TRUE),
    answer("Produces a small yellow pacman emoji that eats your code line-by-line")
  )
)
```





## Other operators

Now that you know more about functions and syntax, take a look through these other common operators and **base R** functions.  

Do not spend a lot of time reviewing these in this exercise, but skim them quickly. If you forget them, these can always be found in the Epi R Handbook [R Basics page](https://epirhandbook.com/en/r-basics.html#operators).  



### Relational operators  

Relational operators compare values and are often used when defining new variables and subsets of datasets. Here are the common relational operators in R:

+--------------------------+------------+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
| Meaning                  | Operator   | Example      | Example Result                                                                                                                                         |
+==========================+============+==============+========================================================================================================================================================+
| Equal to                 | `==`       | `"A" == "a"` | `FALSE` (because R is case sensitive) *Note that == (double equals) is different from = (single equals), which acts like the assignment operator `<-`* |
+--------------------------+------------+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
| Not equal to             | `!=`       | `2 != 0`     | `TRUE`                                                                                                                                                 |
+--------------------------+------------+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
| Greater than             | `>`        | `4 > 2`      | `TRUE`                                                                                                                                                 |
+--------------------------+------------+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
| Less than                | `<`        | `4 < 2`      | `FALSE`                                                                                                                                                |
+--------------------------+------------+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
| Greater than or equal to | `>=`       | `6 >= 4`     | `TRUE`                                                                                                                                                 |
+--------------------------+------------+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
| Less than or equal to    | `<=`       | `6 <= 4`     | `FALSE`                                                                                                                                                |
+--------------------------+------------+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
| Value is missing         | `is.na()`  | `is.na(7)`   | `FALSE` (we will discuss missing data in R, later)                                                                                                                   |
+--------------------------+------------+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+
| Value is not missing     | `!is.na()` | `!is.na(7)`  | `TRUE`                                                                                                                                                 |
+--------------------------+------------+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------+

### Logical operators  

Logical operators, such as AND and OR, are often used to connect relational operators and create more complicated criteria. Complex statements might require parentheses ( ) for grouping and order of application.

+---------------------+-----------------------------------------------------------------------+
| Meaning             | Operator                                                              |
+=====================+=======================================================================+
| AND                 | `&`                                                                   |
+---------------------+-----------------------------------------------------------------------+
| OR                  | `|` (vertical bar)                                                    |
+---------------------+-----------------------------------------------------------------------+
| Parentheses         | `( )` Used to group criteria together and clarify order of operations |
+---------------------+-----------------------------------------------------------------------+


### `%in%`

A very useful operator for matching values, and for quickly assessing if a value is within a vector or dataframe.

```{r, echo=T}
my_vector <- c("a", "b", "c", "d")
```

```{r, echo=T}
"a" %in% my_vector
"h" %in% my_vector
```

To ask if a value is **not** `%in%` a vector, put an exclamation mark (!) **in front** of the logic statement:

```{r, echo=T}
# to negate, put an exclamation in front
!"a" %in% my_vector
!"h" %in% my_vector
```





### Base R math functions  

| Purpose            | Function                              |
|--------------------|---------------------------------------|
| rounding           | round(x, digits = n)                  |
| rounding           | janitor::round_half_up(x, digits = n) |
| ceiling (round up) | ceiling(x)                            |
| floor (round down) | floor(x)                              |
| absolute value     | abs(x)                                |
| square root        | sqrt(x)                               |
| exponent           | exponent(x)                           |
| natural logarithm  | log(x)                                |
| log base 10        | log10(x)                              |
| log base 2         | log2(x)                               |



Note: See [this page in the Epi R Handbook](https://epirhandbook.com/en/r-basics.html#rounding) before using rounding functions. There is some mathematical nuance that is important in some circumstances.  

### Statistical functions  

[***CAUTION:*** The functions below will, by default, include missing values in calculations. Missing values in the vector (which in R are written as `NA`) will result in an output of `NA`, unless the argument `na.rm = TRUE` is specified. Setting this argument to `TRUE` is specifying that **NA**s be **removed** (rm) from the calculation. This can be written shorthand as `na.rm = T`.  


| Objective               | Function           |
|-------------------------|--------------------|
| mean (average)          | mean(x, na.rm=T)   |
| median                  | median(x, na.rm=T) |
| standard deviation      | sd(x, na.rm=T)     |
| quantiles\*             | quantile(x, probs) |
| sum                     | sum(x, na.rm=T)    |
| minimum value           | min(x, na.rm=T)    |
| maximum value           | max(x, na.rm=T)    |
| range of numeric values | range(x, na.rm=T)  |
| summary\*\*             | summary(x)         |

Notes:

* *`quantile()`: `x` is the vector of numbers to consider, and `probs =` is a numeric vector with probabilities within 0 and 1.0, e.g `c(0.5, 0.8, 0.85)`
* **`summary()`: gives a summary on a numeric vector including mean, median, and common percentiles

[***DANGER:*** If providing a vector of numbers to one of the above statistical functions, be sure to wrap the numbers within `c()` .]{style="color: red;"}

```{r, eval=T, echo=T}
# If supplying raw numbers to a statistical function, wrap them in c()
mean(1, 6, 12, 10, 5, 0)    # !!! INCORRECT !!!  

mean(c(1, 6, 12, 10, 5, 0)) # CORRECT
```



## Project organization  


### File naming can impact your quality of life  

File naming can seem like a small thing to focus on, but the ramifications can be significant. Proper file naming can really save you time and headache, and switching your practice can be easy.  

Imagine the power of R - you can write code to automatically import the most recent data files by the date in their file name! But this can be hindered by poor file naming practices.  

Even if you never try coding such as that, you surely know that bad file naming practices can cause significant problems for version control and archiving.  

### Good and bad file names  

**Have you ever seen files like these?**  

`r emo::ji("cross mark")` notes.docx  
`r emo::ji("cross mark")` a.R  
`r emo::ji("cross mark")` 2b.xlsx  
`r emo::ji("cross mark")` notes.txt  

**How about something like this?**  

`r emo::ji("cross mark")` case control San Jose factory.pptx  
`r emo::ji("cross mark")` abstract for Mark?.xlsx  
`r emo::ji("cross mark")` December 20 update.R  
`r emo::ji("cross mark")` draft "malaria study" report(1).docs  

These are very difficult to work with. Try to follow these principles when naming files (your future self will thank you!):  

* **Be nice to machines**  
* **Be nice to humans**  
* **Make sorting and searching easy**  

Let's discuss tips to achieve each of these principles.  


### Names that are machine-readable  

**Don't use white (empty) space in file names** (machines sometimes get confused by spaces)  

`r emo::ji("cross mark")` Draft Vax outreach team.docx  
`r emo::ji("check")` vaccination-outreach_draft01.docx  
     

**Use letters, numbers, hyphens (-), and underscores (_) only** (special characters can have special meanings and confuse machines e.g. ^.*?+|$ )  

`r emo::ji("cross mark")` Ministry report ?.docx  
`r emo::ji("check")` ministry_report_draft01.docx  


**Never have two file names that differ only by case** (some operating systems treat b and B the same, while others treat them as different), and **be consistent with your case** (usually lowercase is better)  

`r emo::ji("cross mark")` study.docx  
`r emo::ji("cross mark")` Study.docx  
`r emo::ji("cross mark")` Belgium-and-france.docx  

`r emo::ji("check")` study.docx  
`r emo::ji("check")` belgium-and-france.docx  

### Names that are human-readable  

**Use hyphens and underscores differently**  

* Hyphen should mean: "different words, but part of the same idea"  
* Underscore should mean: "different idea"  
     
`r emo::ji("check")` 20200316_goma_linelist.xlsx  
`r emo::ji("check")` transmission-analysis_california_mmwr.docx  


### Names that sort easily  

Dates should be written as **YYYY-MM-DD** (the ISO 8601 standard). Usually, it is best to place the dates before other name components to preserve chronology.  

File names with this style of dates do not sort in chronological order!  

`r emo::ji("cross mark")` 1-April-2012_linelist.xlsx  
`r emo::ji("cross mark")` 1-Jan-2009_linelist.xlsx  
`r emo::ji("cross mark")` 1-Jan-2012_linelist.xlsx  
`r emo::ji("cross mark")` 12-Jan-2012_linelist.xlsx  
`r emo::ji("cross mark")` 2-Jan-2012_linelist.xlsx  
`r emo::ji("cross mark")` 31-Dec-2009_linelist.xlsx  

But this style does sort correctly!

`r emo::ji("check")` 2009-01-01_linelist.xlsx  
`r emo::ji("check")` 2009-12-01_linelist.xlsx  
`r emo::ji("check")` 2009-12-31_linelist.xlsx  
`r emo::ji("check")` 2012-01-01_linelist.xlsx  
`r emo::ji("check")` 2012-01-02_linelist.xlsx  
`r emo::ji("check")` 2012-04-01_linelist.xlsx  

**To order files without dates**, use numbers as prefixes (left pad with 0 so all numbers have the same length!)  

`r emo::ji("check")` 01_introduction.docx  
`r emo::ji("check")` 02_methods.docx  
`r emo::ji("check")` 03_analysis.docx  

... (more chapters)...  

`r emo::ji("check")` 19_appendix-04.docx  
`r emo::ji("check")` 20_appendix-05.docx  
`r emo::ji("check")` 21_appendix-06.docx  

In the end, file naming does not come with hard rules - it is a personal choice. However, certain choices can lead to more frustration, lost files, and coding headaches later.  


```{r quiz-file-names}
quiz(caption = "Quiz - file names",
  question("What is problematic about this file name (select ALL that apply):\n\nSARS.Exposure.listing 1stdraft 01032016.csv",
    allow_retry = T,
    answer("The date is incorrectly ordered", correct = T, message = "The date should be in YYYY-MM-DD format"),
    answer("It is actually for Measles, not SARS ", message = "You don't know that! This is an example :-)"),
    answer("It uses special characters", correct = T, message = "File names should avoid periods"),
    answer("It uses spaces", correct = T, message = "Avoid spaces in file names"),
    answer("The date should be at the beginning", correct = T, message = "For proper ordering, the date should be at the beginning")
  )
)
```

### Clean file names  

`r fontawesome::fa("window-restore", fill = "darkgrey")` In your File Explorer, view the "intro_course" folder that we gave to you at the beginning of the course, in which you have created the R project.  

Here is how your folder structure should look:  

* `r emo::ji("folder")` project ("intro_course")  
     * `r emo::ji("folder")` data
          * `r emo::ji("folder")` clean  
            * `r emo::ji("folder")`backup  
          * `r emo::ji("folder")` raw  
            * `r emo::ji("folder")`backup  
          * `r emo::ji("folder")`pop  
          * `r emo::ji("folder")` shp  
     * `r emo::ji("folder")` scripts
          * `r emo::ji("folder")`backup  
     * `r emo::ji("folder")` outputs  
     * `r emo::ji("folder")` learning materials  
          * `r emo::ji("folder")` slides
          * `r emo::ji("folder")` covid_case_study  
     * `r emo::ji("document")` surveillance_linelist_20141201.csv
     * intro_course.Rproj  

`r emo::ji("warning")` You may also have some other files like ".Rhistory" - do NOT delete these. Just leave them.  


#### Clean file names  

`r fontawesome::fa("window-restore", fill = "darkgrey")` **Now enter the folder "data/raw/hospital".**  

Regard the files - these are linelists of Ebola patients admitted for care, as sent to you on the 1st of December 2014, from 4 different hospitals (**Port Hospital**, **Military Hospital**, **St. Mark's Maternity Hospital (SMMH)**, and **Central Hospital**). There are also files containing records from **"Other" hospitals**, and of patients for whom the **hospital is "Missing"**.  

How can these file names be improved? Both for human readability, but also to facilitate standardized code that we may write to import them into R?  

**Edit the file names to that they are standardized with best practices above**  

**When finished, view the "solution" below.** We suggest that you align your file names with these.  

<!--
NOTE: Below is the solution (all within details tags collapsed)
-->

<details>
<summary style='text-decoration: underline; color: red;'>`r fontawesome::fa("check", fill = "red")`Click to see a solution (try it yourself first!)</summary>
</br>

* 20141201_hosp_central.csv  
* 20141201_hosp_military.csv  
* 20141201_hosp_port.csv  
* 20141201_hosp_smmh.csv  
* 20141201_hosp_other.csv  
* 20141201_hosp_missing.csv  

</br>
</details>
<!--
NOTE: End of solution
-->



### Project structure

A few remarks here on folder structure:  

#### Folder structure  

* Typically, public health analysis folders will contain subfolders such as:  
     * data (often subdivided into "raw" and "clean", or by time period) 
     * scripts (or sometimes, just called "R")  
     * outputs  
     * images (if you are embedding images in your R documents)  

#### README files  

**Most folders should have a README file** that explains what lives in the folder, how it is updated, how it is used, etc.  

* In a finished project, the README should help users navigate and understand the contents.  
* In a project template, the README contains instructions for you to setup the project!  



**Now, add a .txt file that is named README.txt. Place the brief information that you learned above about where these data come from (the hospitals) in this file, and save it in the "raw" folder as README.txt.**  

You can do this by opening NotePad or a similar software, entering the text, and saving it in the folder. If you cannot find a plain text editor, you can use Microsoft Word.  


*Concepts in this section on project structure were borrowed from this [slide deck on project structure](https://slides.djnavarro.net/project-structure/#1) by DJ Navarro.*  




<!-- `r emo::ji("warning")` -->
<!-- `r emo::ji("bookmark")` -->






## Importing a dataset  

To begin working with data, you must import it into the R environment as an object.  

Once imported, the dataset will be saved as a **data frame** object, which consists of columns and rows.  


### Script organization  

Recall that often a script is run from top-to-bottom. Therefore, you will need to organize your script in a logical manner.  

Typically, you begin with loading packages, and then continue to importing data.  


### Location of the data  

**In order to import data into R, you must tell R where to access the data file on your computer (e.g. a specific folder).**  

This can be surprisingly difficult (e.g. when data are stored on shared drives). However, by saving the data *within our R project* the whole process becomes much easier.  




### rio - the easy package for importing data  

There are **base R** functions for importing data, but they can be confusing and difficult to remember - there are separate functions for each type of file (e.g. .xlsx, .csv, .tsv, .txt, etc).  

**Thankfully, there is one function that works for almost all file formats**, which is the `import()` function from the package **rio**.  

**Let us find our data file**  

Do you see the file "*surveillance_linelist_20141201.csv*" that is saved in the "root" project folder? This is the baseline folder - the same folder as the "*intro_course.Rproj*" file. To access the root folder from the R project file you do *not* need to click into any sub-directories (sub-folders).  

**Run the `import()` command**  

In its most simple form, the `import()` function accepts a character value - the file path to the data that you wish to import. In this case, the data file which we want to import is saved in the root folder, so you only need to provide the file name and extension, in quotation marks, as below:  


```{r, echo=T, eval=F}
import("surveillance_linelist_20141201.csv")
```


`r fontawesome::fa("exclamation", fill = "red")` Did you see this error?  

>Error in import("surveillance_linelist_20141201.csv") :  could not find function "import"  
>  
>If so, it means that you did not install and load the **rio** package. If you need help, review the previous section and look for the `pacman::p_load()` command that loads several packages including **rio**.  

Once you get the command to run successfully, you probably saw a lot of text appear in the **Console**. That was the dataset!

**Think: what did your command ask R to do?** It asked R to import the dataset... and the default action is to print/display it.  

You did not ask R to save the dataset as a named object. How would you do that?  

**In RStudio, try again to import the data and save it as the object `linelist` (a short name for "surveillance linelist raw").** 



<!--
NOTE: Below is the hint (all within details tags collapsed)
-->
<details>

<summary style='text-decoration: underline; color: darkgreen;'>`r fontawesome::fa("lightbulb", fill = "gold")` Click to read a hint</summary>
</br>

Use the assignment operator `<-` before the function. Don't forget quotation marks around the name of the file.  

</br>
</details>


<!--
NOTE: Below is the solution (all within details tags collapsed)
-->

<details>
<summary style='text-decoration: underline; color: red;'>`r fontawesome::fa("check", fill = "red")`Click to see a solution (try it yourself first!)</summary>
</br>

```{r eval = F, echo=T}
linelist <- import("surveillance_linelist_20141201.csv")
```

</br>
</details>
<!--
NOTE: End of solution
-->


You should now see the new object `linelist` appear in the R **Environment pane**, under the subcategory "Data". It should have a short description of the number of observations and variables. Congratulations, you have now imported a dataset into R!  


### Importing data from subfolders  

In most cases, it is better organizationally to store data in a subfolder - even perhaps by week, or by status as either "raw" or "clean". In this course, most of the data are initially stored in a subfolder named "data".  

`r fontawesome::fa("window-restore", fill = "darkgrey")` Now, go to your File Explorer to the root folder of the R project.  

**Cut the file *"surveillance_linelist_20141201.csv"* from the root folder, and paste it into the "data/raw" subfolder.**  


And so we are introduced to the topic of file paths.  

Any importing function needs to know *where* to look for the file that you want to import - this is the **file path**.  

A typical file path ("absolute" file path, or a "full" file path) may look like this:  

```{r, echo=T, eval=F}
linelist <- import("C:/Users/Laura/Documents/intro_course/data/surveillance_linelist_20141201.csv")
```

The problem with this is all of the path before "intro_course" ... the C: ... the "Laura" ... etc. None of these may be present in the computer of Laura's colleague, and this command would not run. The file path would be "broken". Or, the next user may be using a Mac, so the slashes would all need to be reversed! Thankfully there is a solution:  



### The {here} package and relative file paths  

The package {here} and its function `here()` make it easy to tell R where to find and to save your files - in essence, it builds *relative file paths*.

Used in conjunction with an RStudio project, {here} allows you to describe the location of files in your RStudio project *in relation to the project’s root directory (the top-level folder)*. This is useful when the project may be shared or accessed by multiple people/computers or when a script may be moved around within the project.  

Used with an RStudio project, it prevents complications due to the unique file paths on different computers (e.g. "C:/Users/Laura/Documents...") by “starting” the file path in a place common to all users (the project root).  


`r fontawesome::fa("terminal", fill = "black")` Make sure you have installed and loaded the package {here}. Then try running the command `here()` - leave the parentheses empty. What do you see?  

In "Laura"'s situation, the output might look like this:  

```{r, echo=T, eval=F}
"C:/Users/Laura/Documents/intro_course")
```

`here()` has automatically created the full file path that comes before the RStudio project root folder ("intro_course").  

It is easy to add sub-folders at the end of the path, like this:  

```{r, echo=T, eval=F}
here("data", "raw")
```

This would produce the file path:  

```{r, echo=T, eval=F}
"C:/Users/Laura/Documents/intro_course/data/raw")
```

Ending the `here()` command with a file **name and extension** could look like this:  

```{r, echo=T, eval=F}
here("data", "raw", "surveillance_linelist_20141201.csv")
```

This would produce the file path:  

```{r, echo=T, eval=F}
"C:/Users/Laura/Documents/intro_course/data/raw/surveillance_linelist_20141201.csv")
```

Now comes the secret combination: we insert this `here()` command *into* the `import()` command! We nest one function inside another one! Take a look at this:  

```{r, echo = T, eval=F}
# import the file from the "data" and "raw" subfolders
linelist <- import(here("data", "raw", "surveillance_linelist_20141201.csv"))
```

Note the two parentheses at the end - one for each function. The file path returned by `here()` is passed to the first argument of `import()` as a character value.  

#### A note on slashes  

You may wonder - where are the forward slashes and back slashes in the `here()` command? Well, `here()` allows the slack-agnostic entry format above because it can adapt to whether you are working on a Mac or a PC!  

On a PC:  

* project/data/linelist_20141201.csv  
* project/data/linelist_20141208.csv  

On a Mac:  

* project\\data\\linelist_20141201.csv  
* project\\data\\linelist_20141208.csv  

You do not know who will be using your script later, or what kind of computer they will have. Therefore, it is easier to simply go with: `here("data", "linelist_20141201.csv")`.  


### Import from a subfolder  


`r fontawesome::fa("terminal", fill = "black")` Now in RStudio, write a command to import "surveillance_linelist_20141201.csv" from the subfolder "data/raw" (where you moved it, earlier) and save it in R as `linelist` using the assignment operator.  


<!--
NOTE: Below is the hint (all within details tags collapsed)
-->
<details>

<summary style='text-decoration: underline; color: darkgreen;'>`r fontawesome::fa("lightbulb", fill = "gold")` Click to read a hint</summary>
</br>

Begin the command with the object name that you want to assign, then the assignment operator, and then the `import()` command. Within the `import()` parentheses, place the `here()` function, which should list the names of the sub-folders (in quotes) and include the file name with extension (.csv).  

</br>
</details>


<!--
NOTE: Below is the solution (all within details tags collapsed)
-->

<details>
<summary style='text-decoration: underline; color: red;'>`r fontawesome::fa("check", fill = "red")`Click to see a solution (try it yourself first!)</summary>
</br>

```{r eval = F, echo=T}
linelist <- import(here("data", "raw", "surveillance_linelist_20141201.csv"))
```

</br>
</details>
<!--
NOTE: End of solution
-->






```{r quiz-data-import}
quiz(caption = "Quiz - importing",
  question("How would you write the import() and here() command for the following filepath (assuming the R project is located in the folder 'malaria')?:\n\nE:/Mario/My Documents/R stuff/malaria/received/wk22/cases.csv",
    allow_retry = T,
    answer("import() here('received/wk22/cases.csv')", message = "No, the here() function must be nested within the import() function."),
    answer("import(here('received', 'wk22', 'cases', '.csv'))", message = "No, include the file extension with the file name."),
    answer("here(import('received', 'wk22', 'cases.csv'))", message = "No, the here() function must be nested within the import() function, because it is providing the file path to it."),
    answer("import(here('received', 'wk22', 'cases.csv'))", correct = T)
  )
)
```









## Review a dataset  

Now that you have imported the data, let's take a look!  


### Take a peek  

`r fontawesome::fa("eye", fill = "darkblue")` The dataset is now saved as a data frame object in the RStudio **Environment pane**. Find its name there, and click once on the blue circle next to the name. What do you see?  

The expanded area beneath the data frame is an overview of all the columns in the data frame. After the name of the column, there is a colon, then an abbreviation that indicates the "class" of the column (we'll discuss this more later), and then the first few values in the column. How exciting!  

For even more detail, collapse this overview and **click on the name of the data frame itself (`linelist`).**  

This should open a new tab in the upper-left pane, next to the R script. This tab will display the data frame! You can scroll through the data frame, and even apply filters (see the icon in the upper-left of the display).  

Try these exercises:  

```{r quiz-data-review}
quiz(caption = "Quiz - data review",
  question("How many columns are there in the data frame?",
    allow_retry = T,
    answer("665", message = "No, this is the number of rows/observations"),
    answer("23", correct = TRUE, message = "Yes this is correct!"),
    answer("19", message = "This is not correct, try again."),
    answer("25", message = "No, this is the number of rows shown in the initial display")
  ),

  question("What is the value in the 4th column and the 50th row?",
    allow_retry = T,
    answer("m", correct = TRUE),
    answer("Port Hospital"),
    answer("38.3"),
    answer("West II")
  ),

  question("How many of the rows include a weight between 40 and 45 kg?",
    allow_retry = T,
        answer("112"),
        answer("65", correct = TRUE),
        answer("226"),
        answer("95")
  )
)
```


### Indexing  

Above we asked you to find the value in the 4th column, and the 50th row. Instead of searching manually, you can also write code to isolate and view pieces of the dataframe.  

**The `$` operator can be used on a dataframe to reference a specific column.** It is one of the indexing operators in R, which returns a sub-part of a larger object. For example, `linelist$gender` will return the entire column `gender`.  

**Try typing and running the following commands**  

* `linelist$hospital`  
* `linelist$case_id`

As you typed, slowly, did you see anything appear as you arrived at typing the `$`? You should have seen a small menu appear that showed all the columns in the data frame `linelist`. Using your arrow keys you can select a column from that menu - if you do not want to type the rest and potentially make a spelling mistake.  

**Try writing commands to show other columns, and experiment with this pop-up menu**.  

Here is something you should know: columns can also be referred to as "vectors" - vectors are a long line of values of the same class. So in fact, a data frame is simply a collection of vectors (columns!).  

You can also create other, independent vectors, like you have already done with `c()`. But most commonly, you will work with vectors in the context of a data frame. "Vector" is a good term to know.  

Another indexing operator to be aware of is the "square brackets" that look like `[ ]`. These brackets can also be used to isolate/return a sub-part of a larger object: `dataframe[ROW, COLUMN]`  
This command would return the value at the 12th row and the 4th column: `linelist[12, 4]`  

You can return an entire column by leaving the ROWS part empty (but don't forget the comma!):  `linelist[ ,4]`  
Or an entire row by doing the opposite: `linelist[12, ]`  

Other objects can be subset as well. For example, the `summary()` function when used on a column returns an object that contains the minimum, median, mean, IQR, etc.  

Try these three commands in R to see how the output changes as further indexing is applied:  

```{r, echo=T}
# Return the summary of the column 'age'
summary(linelist$age)

# Return the 3rd element of the summary
summary(linelist$age)[3]

# Return the number only, of the 3rd element of the summary
summary(linelist$age)[[3]]

# Do something with the number
summary(linelist$age)[[3]] + 4
```

You will use the `$` very frequently. It is less common to need the brackets. But still - good to know about in case you see them or need to use them.  




### Skim  

You can return a good summary of the dataset using the R package {skimr} and its function `skim()`.  

Use `p_load(skimr)` or `install.packages("skimr")` to install this package and load it for use.  

If you encounter any errors when trying to install the package, notify your facilitator.  

Place the name of the linelist in `skim()` and run. What content appears in the R console?
  
If the output is not easily readable, expand your Console pane to be wider, and run the command again.  



<!--
NOTE: Below is the solution (all within details tags collapsed)
-->

<details>
<summary style='text-decoration: underline; color: red;'>`r fontawesome::fa("check", fill = "red")`Click to see a solution (try it yourself first!)</summary>
</br>

```{r eval = F, echo=T}
skim(linelist)
```

</br>
</details>
<!--
NOTE: End of solution
-->








**What does the output show?**  

```{r quiz-skim}
quiz(caption = "Quiz - reviewing the data",
  question("How many columns has R classified as numeric?",
    allow_retry = T,
    answer("32", message = "No, this is more than the columns in the dataset!"),
    answer("8", correct = TRUE, message = "Yes this is correct!"),
    answer("13", message = "No, this is the number of columns of class character"),
    answer("1", message = "No, this is the number of columns that are POSIXct - a type of date format")
  ),

  question("Review the information on character columns. What is the number of unique values in the hospital column?",
    allow_retry = T,
    answer("9", correct = TRUE),
    answer("Port Hospital"),
    answer("3"),
    answer("8")
  ),

  question("Review the information on numeric columns. What is the median age?",
    allow_retry = T,
        answer("32.2"),
        answer("13", correct = TRUE),
        answer("1250"),
        answer("99.0")
  )
)
```





## End  

Congratulations! You have completed the first exercise in this course!  

Be sure to save your R script, and check-in with your facilitator.  


## Extras  

If you still have time remaining, try some of the activities below.  

### Installing fun packages  

Try installing the R package {praise}, and then see what its function `praise()` does.  

```{r, echo=T, eval=F}
praise()
```



### Customizing RStudio  

Read the information at [this link](https://support.rstudio.com/hc/en-us/articles/200549016-Customizing-the-RStudio-IDE#appearance) and adjust the settings of your RStudio via the "Tools" menu and clicking "Global Options". Which Appearance settings do you prefer?  


### R user communities  

Look through [this list](https://jumpingrivers.github.io/meetingsR/r-user-groups.html) of R User communities and find one near you. See also this list of [R-Ladies](https://rladies.org/) chapters. R-Ladies is one of the biggest groups of R users in the world!  


### Review the basics  

Read through the "R Basics" chapter of the [Epi R Handbook](https://epirhandbook.com/en/r-basics.html#r-basics) - it is full of things that you have learned today, but also topics that will be new. 

If you are confused by any section, ask your instructor for clarification.  


